<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luis | CS @ UofO - File System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom Scrollbar for that 'IDE' feel */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }
        
        /* Animation for opening files */
        .modal-enter {
            animation: fadeIn 0.2s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .folder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 1rem;
        }

        /* UofO Green Accent */
        .uo-green { color: #154733; }
        .bg-uo-green { background-color: #154733; }
        .uo-yellow { color: #FEE123; }
        .border-uo-yellow { border-color: #FEE123; }
        
        .code-syntax { font-family: 'Courier New', Courier, monospace; }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 h-screen w-screen overflow-hidden font-sans select-none">

    <!-- Top Bar / Window Header -->
    <div class="h-12 bg-slate-800 border-b border-slate-700 flex items-center px-4 justify-between select-none">
        <div class="flex items-center space-x-4">
            <!-- Window Controls -->
            <div class="flex space-x-2">
                <div class="w-3 h-3 rounded-full bg-red-500 hover:bg-red-600 cursor-pointer"></div>
                <div class="w-3 h-3 rounded-full bg-yellow-500 hover:bg-yellow-600 cursor-pointer"></div>
                <div class="w-3 h-3 rounded-full bg-green-500 hover:bg-green-600 cursor-pointer"></div>
            </div>
            
            <!-- Breadcrumbs / Path -->
            <div class="flex items-center bg-slate-900 rounded px-3 py-1 text-sm border border-slate-700 w-64 md:w-96 text-slate-400 overflow-hidden">
                <span class="text-green-500 mr-2">âžœ</span>
                <span id="breadcrumbs">~/home</span>
            </div>
        </div>

        <div class="text-xs text-slate-500 hidden md:block">
            Luis_OS v1.0 | University of Oregon
        </div>
    </div>

    <div class="flex h-[calc(100vh-3rem)]">
        
        <!-- Sidebar -->
        <div class="w-48 bg-slate-800 border-r border-slate-700 hidden md:flex flex-col pt-4">
            <div class="px-4 mb-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Favorites</div>
            
            <nav class="space-y-1">
                <button onclick="navigateToPath(['home'])" class="w-full text-left px-4 py-2 hover:bg-slate-700 flex items-center space-x-2 text-sm text-slate-300">
                    <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                    <span>Home</span>
                </button>
                <button onclick="navigateToPath(['home', 'Projects'])" class="w-full text-left px-4 py-2 hover:bg-slate-700 flex items-center space-x-2 text-sm text-slate-300">
                    <svg class="w-4 h-4 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                    <span>Projects</span>
                </button>
                <button onclick="navigateToPath(['home', 'Documents'])" class="w-full text-left px-4 py-2 hover:bg-slate-700 flex items-center space-x-2 text-sm text-slate-300">
                    <svg class="w-4 h-4 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path></svg>
                    <span>Documents</span>
                </button>
                <button onclick="openExternalLink('mailto:luis@uoregon.edu')" class="w-full text-left px-4 py-2 hover:bg-slate-700 flex items-center space-x-2 text-sm text-slate-300">
                    <svg class="w-4 h-4 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                    <span>Contact</span>
                </button>
            </nav>

            <div class="mt-auto p-4">
                <div class="bg-slate-900 rounded p-3 border border-slate-700">
                    <div class="text-xs text-slate-400 mb-1">Storage</div>
                    <div class="w-full bg-slate-700 h-1.5 rounded-full overflow-hidden">
                        <div class="bg-uo-green h-full w-3/4"></div>
                    </div>
                    <div class="text-[10px] text-slate-500 mt-1 text-right">75% Used</div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <main class="flex-1 flex flex-col bg-slate-900 relative">
            
            <!-- Toolbar -->
            <div class="h-10 border-b border-slate-700 flex items-center px-4 space-x-4 bg-slate-800/50 backdrop-blur">
                <button id="btn-up" onclick="goUp()" class="p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-white transition-colors disabled:opacity-30 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path></svg>
                </button>
                <div class="h-4 w-[1px] bg-slate-600"></div>
                <div class="text-sm text-slate-400" id="item-count">0 items</div>
            </div>

            <!-- File Grid -->
            <div id="file-grid" class="flex-1 p-6 folder-grid overflow-y-auto content-start">
                <!-- Content injected via JS -->
            </div>

            <!-- Empty State (Hidden by default) -->
            <div id="empty-state" class="hidden absolute inset-0 flex flex-col items-center justify-center text-slate-600 pointer-events-none">
                <svg class="w-16 h-16 mb-2 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg>
                <span class="text-sm">This folder is empty</span>
            </div>
        </main>
    </div>

    <!-- Modal for File Preview -->
    <div id="file-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden z-50 flex items-center justify-center p-4">
        <div class="bg-slate-800 rounded-lg shadow-2xl w-full max-w-2xl border border-slate-600 flex flex-col max-h-[80vh] modal-enter">
            <!-- Modal Header -->
            <div class="flex items-center justify-between p-3 border-b border-slate-700 bg-slate-900 rounded-t-lg">
                <div class="flex items-center space-x-2">
                    <svg class="w-4 h-4 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                    <span id="modal-title" class="text-sm font-medium text-slate-200">filename.txt</span>
                </div>
                <button onclick="closeModal()" class="text-slate-400 hover:text-white transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <!-- Modal Body -->
            <div class="p-0 overflow-auto bg-slate-900 rounded-b-lg flex-1">
                <div id="modal-content" class="p-6 text-sm leading-relaxed text-slate-300 font-mono whitespace-pre-wrap">
                    <!-- Content goes here -->
                </div>
            </div>
            <!-- Modal Footer -->
            <div class="p-2 bg-slate-800 border-t border-slate-700 flex justify-end">
                <button onclick="copyToClipboard()" class="text-xs bg-slate-700 hover:bg-slate-600 text-white px-3 py-1 rounded transition-colors border border-slate-600">Copy Content</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-6 right-6 bg-slate-800 border border-green-500/50 text-white px-4 py-2 rounded shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center space-x-2 z-50">
        <div class="w-2 h-2 rounded-full bg-green-500"></div>
        <span id="toast-msg" class="text-sm">Action successful</span>
    </div>

    <script>
        // --- ICONS (SVG Strings) ---
        const icons = {
            folder: `<svg class="w-12 h-12 text-yellow-500 mb-2 drop-shadow-lg" fill="currentColor" viewBox="0 0 20 20"><path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/></svg>`,
            fileCode: `<svg class="w-12 h-12 text-blue-400 mb-2 drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>`,
            fileText: `<svg class="w-12 h-12 text-slate-400 mb-2 drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>`,
            fileImage: `<svg class="w-12 h-12 text-purple-400 mb-2 drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>`,
            filePDF: `<svg class="w-12 h-12 text-red-400 mb-2 drop-shadow-md" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>`
        };

        // --- FILE SYSTEM DATA ---
        // This object represents the entire folder structure
        const fileSystem = {
            "home": {
                type: "folder",
                children: {
                    "Documents": {
                        type: "folder",
                        children: {
                            "resume.txt": { type: "file", icon: "fileText", content: "LUIS - CS STUDENT @ UofO\n\nEDUCATION\n- University of Oregon\n- B.S. Computer Science\n- Expected Graduation: 2026\n\nSKILLS\n- C++, Python, Java\n- Web Dev (HTML/CSS/JS)\n- Data Structures & Algorithms\n- Linux/Unix Environment\n\nEXPERIENCE\n- CS Tutor (2023-Present)\n- Hackathon Participant (UO Hack 2024)" },
                            "transcript_unofficial.txt": { type: "file", icon: "fileText", content: "COURSEWORK HIGHLIGHTS:\n\n- CS 210: Computer Science I (A)\n- CS 211: Computer Science II (A-)\n- CS 212: Computer Science III (B+)\n- CS 313: Intermediate Data Structures (In Progress)\n- MATH 231: Discrete Mathematics (A)" },
                            "cover_letter_draft.txt": { type: "file", icon: "fileText", content: "To Hiring Manager,\n\nI am writing to apply for the Software Engineering Intern position. As a dedicated CS student at the University of Oregon (Go Ducks!), I have a passion for building efficient backend systems..." }
                        }
                    },
                    "Projects": {
                        type: "folder",
                        children: {
                            "Web_Crawler": {
                                type: "folder",
                                children: {
                                    "main.py": { type: "file", icon: "fileCode", content: "import requests\nfrom bs4 import BeautifulSoup\n\ndef crawl(url):\n    response = requests.get(url)\n    soup = BeautifulSoup(response.text, 'html.parser')\n    # ... logic continues\n    print('Crawling complete')" },
                                    "readme.md": { type: "file", icon: "fileText", content: "# Python Web Crawler\n\nA simple multi-threaded web crawler built for CS 313.\n\n## Features\n- Respects robots.txt\n- Depth-limited search\n- JSON output" }
                                }
                            },
                            "React_Weather_App": {
                                type: "folder",
                                children: {
                                    "App.js": { type: "file", icon: "fileCode", content: "import React, { useState } from 'react';\n\nfunction App() {\n  const [weather, setWeather] = useState(null);\n  // API logic here\n  return <div>{weather}</div>;\n}" },
                                    "styles.css": { type: "file", icon: "fileCode", content: ".weather-card {\n  background: #f0f0f0;\n  padding: 20px;\n  border-radius: 8px;\n}" }
                                }
                            },
                            "Shell_Script_Tools": {
                                type: "folder",
                                children: {
                                    "backup.sh": { type: "file", icon: "fileCode", content: "#!/bin/bash\n\n# Simple backup script\ntar -czf backup_$(date +%Y%m%d).tar.gz /home/user/projects\necho 'Backup complete'" }
                                }
                            }
                        }
                    },
                    "Images": {
                        type: "folder",
                        children: {
                            "duck_mascot.png": { type: "file", icon: "fileImage", content: "[Image Preview Not Available in Text Mode]\n\nImagine a cool pixel art of the Oregon Duck here." },
                            "diagram_architecture.png": { type: "file", icon: "fileImage", content: "[Image] System Architecture Diagram for the Web Crawler project." }
                        }
                    },
                    "about_me.txt": {
                        type: "file",
                        icon: "fileText",
                        content: "Hi, I'm Luis.\n\nI'm a Computer Science major at the University of Oregon.\nI love solving complex problems and building things that live on the web.\n\nWhen I'm not coding, I'm usually hiking in the PNW or cheering for the Ducks."
                    },
                    "contact_info.json": {
                        type: "file",
                        icon: "fileCode",
                        content: "{\n  \"email\": \"luis@uoregon.edu\",\n  \"github\": \"github.com/luis-cs\",\n  \"linkedin\": \"linkedin.com/in/luis-dev\",\n  \"location\": \"Eugene, OR\"\n}"
                    }
                }
            }
        };

        // --- STATE ---
        let currentPath = ['home'];
        
        // --- DOM ELEMENTS ---
        const grid = document.getElementById('file-grid');
        const breadcrumbs = document.getElementById('breadcrumbs');
        const emptyState = document.getElementById('empty-state');
        const itemCount = document.getElementById('item-count');
        const btnUp = document.getElementById('btn-up');
        const modal = document.getElementById('file-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        
        // --- FUNCTIONS ---

        function getFolderFromPath(pathArray) {
            let current = fileSystem;
            // The logic assumes the structure starts at root. 
            // Our path array starts with 'home'.
            // fileSystem['home'] exists.
            
            for (let i = 0; i < pathArray.length; i++) {
                const seg = pathArray[i];
                if (current[seg]) {
                    // It's the root level
                    current = current[seg]; 
                } else if (current.children && current.children[seg]) {
                    // Traversing deeper
                    current = current.children[seg];
                } else {
                    return null; // Path invalid
                }
            }
            return current;
        }

        function render() {
            // Update Header
            breadcrumbs.innerHTML = currentPath.map(p => `/${p}`).join('');
            
            // Enable/Disable Up Button
            btnUp.disabled = currentPath.length <= 1;
            btnUp.style.opacity = currentPath.length <= 1 ? '0.5' : '1';

            // Get Current Directory Data
            const currentDirObj = getFolderFromPath(currentPath);
            grid.innerHTML = ''; // Clear grid

            if (!currentDirObj || !currentDirObj.children || Object.keys(currentDirObj.children).length === 0) {
                emptyState.classList.remove('hidden');
                itemCount.innerText = "0 items";
                return;
            }

            emptyState.classList.add('hidden');
            const entries = Object.entries(currentDirObj.children);
            itemCount.innerText = `${entries.length} items`;

            // Sort: Folders first, then files
            entries.sort((a, b) => {
                const aIsFolder = a[1].type === 'folder';
                const bIsFolder = b[1].type === 'folder';
                if (aIsFolder && !bIsFolder) return -1;
                if (!aIsFolder && bIsFolder) return 1;
                return a[0].localeCompare(b[0]);
            });

            entries.forEach(([name, data]) => {
                const el = document.createElement('div');
                el.className = 'flex flex-col items-center p-4 rounded hover:bg-slate-800 cursor-pointer transition-colors group text-center w-28';
                
                // Icon
                let iconSvg = icons.folder;
                if (data.type === 'file') {
                    iconSvg = icons[data.icon] || icons.fileText;
                }

                el.innerHTML = `
                    <div class="transform group-hover:scale-110 transition-transform duration-200">
                        ${iconSvg}
                    </div>
                    <span class="text-xs text-slate-300 mt-1 break-all line-clamp-2 px-1 rounded group-hover:bg-blue-600/30 group-hover:text-white">${name}</span>
                `;

                // Interactions
                el.onclick = () => {
                    if (data.type === 'folder') {
                        currentPath.push(name);
                        render();
                    } else {
                        openFile(name, data.content);
                    }
                };

                grid.appendChild(el);
            });
        }

        function goUp() {
            if (currentPath.length > 1) {
                currentPath.pop();
                render();
            }
        }
        
        function navigateToPath(pathArr) {
            currentPath = [...pathArr];
            render();
        }

        function openExternalLink(url) {
            window.open(url, '_blank');
        }

        // --- MODAL LOGIC ---
        function openFile(filename, content) {
            modalTitle.innerText = filename;
            modalContent.innerText = content || "(No content)";
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        // Close modal on escape key or click outside
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        function copyToClipboard() {
            const text = modalContent.innerText;
            navigator.clipboard.writeText(text).then(() => {
                showToast("Content copied to clipboard!");
            });
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }

        // --- INIT ---
        render();

    </script>
</body>
</html>